generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  user_id       Int     @id @default(autoincrement())
  user_email    String  @unique
  user_name     String
  gender        String
  avatar        String?
  points_gained Int?
  password      String

  registeredAt DateTime @default(now())
  updatedAt    DateTime @default(now()) @updatedAt

  blogs Blog[]
  likes Like[]
}

model Blog {
  blog_id          Int      @id @default(autoincrement())
  blog_title       String?
  blog_description String?
  blog_image       String
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt

  category_id Int
  category    Category @relation(fields: [category_id], references: [category_id])

  user_id Int
  user    User   @relation(fields: [user_id], references: [user_id])
  likes   Like[]
}

model Category {
  category_id   Int    @id @default(autoincrement())
  category_name String

  blogs Blog[]
}

model Like {
  like_id Int @id @default(autoincrement())

  liked_by   Int // User who liked the blog
  user       User     @relation(fields: [liked_by], references: [user_id])
  blog_id    Int // Blog that was liked
  blog       Blog     @relation(fields: [blog_id], references: [blog_id])
  created_at DateTime @default(now()) // Timestamp for when the like was made
}
